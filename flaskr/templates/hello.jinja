{% extends "home.jinja" %}
{%block title%}Revenue{%endblock title%}
{%block content%}
<div display="flex !important">
    <div style="margin-top:50px ;">
        <form>
            <p class="title">Monthly Revenue</p>
            <label for="year">Year</label>
            <input type="text" id="year">
            <label for="month">Month</label>
            <select id="month">
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>
            <button class="button" onclick="get_monthly_revenue()">Submit</button>
        </form>

    </div>
</div>
<script>
    function easter_egg(total_income) {
        alert("Total monthly income:"+total_income);
    }

    function get_monthly_revenue() {
        const year = document.getElementById("year").value;
        const month = document.getElementById("month").value;
        const data = { year, month };

        fetch("/income/", {  // Update the API endpoint URL
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => {
            easter_egg(data.income);
        });
    }
</script>

{%endblock content%}